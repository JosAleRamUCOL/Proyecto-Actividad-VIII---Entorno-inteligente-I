<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoreo - Sensor BMP280</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <link rel="stylesheet" href="/main/style.css">
    <link rel="stylesheet" href="/monitoreo/style_monitoreo.css">
</head>
<body>
    <!-- Men√∫ de navegaci√≥n superior -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="nav-logo">Sistema EITD</div>
            <ul class="nav-menu">
              <li><a href="/success" class="nav-link">Inicio</a></li>
              <li><a href="/basedatos" class="nav-link">Base de datos</a></li>
              <li><a href="/monitoreo" class="nav-link active">Monitoreo</a></li>
              <li><a href="/gestion" class="nav-link">Gesti√≥n</a></li>
            </ul>
        </div>
    </nav>

    <div class="monitoring-container">
        <div class="monitoring-header">
            <h2>Monitoreo en Tiempo Real</h2>
            <p class="monitoring-subtitle">Sensor BMP280 - Presi√≥n y Temperatura</p>
        </div>
        
        <!-- Secci√≥n de conexi√≥n -->
        <div class="connection-section">
            <div class="connection-inputs">
                <input type="text" id="topicInput" placeholder="Tema MQTT (ej: sensor/bmp280)" value="sensor/bmp280">
                <button id="connectBtn" class="btn-connect">Conectar al Broker</button>
            </div>
            <div id="connectionStatus" class="status-disconnected">‚óè Desconectado</div>
        </div>
        
        <!-- Panel de m√©tricas -->
        <div class="metrics-grid">
            <!-- Tarjeta de Temperatura -->
            <div class="metric-card temperature-card">
                <div class="metric-icon">üå°Ô∏è</div>
                <div class="metric-label">Temperatura</div>
                <div class="metric-value" id="temperatureValue">--</div>
                <div class="metric-unit">¬∞C</div>
                <div class="metric-timestamp" id="tempTimestamp">Sin datos</div>
            </div>
            
            <!-- Tarjeta de Presi√≥n -->
            <div class="metric-card pressure-card">
                <div class="metric-icon">üìä</div>
                <div class="metric-label">Presi√≥n Atmosf√©rica</div>
                <div class="metric-value" id="pressureValue">--</div>
                <div class="metric-unit">hPa</div>
                <div class="metric-timestamp" id="pressTimestamp">Sin datos</div>
            </div>
        </div>

        <!-- Panel de estad√≠sticas -->
        <div class="stats-section">
            <h3>Estad√≠sticas de la Sesi√≥n</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-label">Temperatura M√≠nima</div>
                    <div class="stat-value" id="tempMin">--¬∞C</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Temperatura M√°xima</div>
                    <div class="stat-value" id="tempMax">--¬∞C</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Presi√≥n M√≠nima</div>
                    <div class="stat-value" id="pressMin">--hPa</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Presi√≥n M√°xima</div>
                    <div class="stat-value" id="pressMax">--hPa</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Mensajes Recibidos</div>
                    <div class="stat-value" id="messageCount">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">√öltima Actualizaci√≥n</div>
                    <div class="stat-value stat-time" id="lastUpdate">--:--:--</div>
                </div>
            </div>
        </div>

        <!-- Log de mensajes -->
        <div class="log-section">
            <div class="log-header">
                <h3>Registro de Datos</h3>
                <button id="clearLogBtn" class="btn-clear">Limpiar</button>
            </div>
            <div id="messageLog" class="message-log"></div>
        </div>
    </div>

    <script src="/monitoreo/script_monitoreo.js"></script>
</body>
</html>